{%- from "collectd/map.jinja" import collectd_settings with context %}
#
# DO NOT EDIT
#
# This file is managed by salt via {{ source }}
# Modify the config that generates this file instead
#

LoadPlugin write_tsdb

<Plugin write_tsdb>
 <Carbon>
   Host "{{ collectd_settings.plugins.write_tsdb.host }}"
   Port "{{ collectd_settings.plugins.write_tsdb.port }}"
{%- if collectd_settings.plugins.write_tsdb.hosttags is defined %}
{%- set host_tags = [] %}
{%- for tag, value in collectd_settings.plugins.write_tsdb.hosttags.iteritems() %}
    {%- do host_tags.append('{0}={1}'.format(tag, value)) %}
{%- endfor %}
   HostTags "{{ host_tags|join(' ') }}"
{%- endif %}
{%- if collectd_settings.plugins.write_tsdb.storerates is defined and collectd_settings.plugins.write_tsdb.storerates %}
   StoreRates {{ collectd_settings.plugins.write_tsdb.storerates|lower }}
{%- endif %}
{%- if collectd_settings.plugins.write_tsdb.alwaysappendds is defined and collectd_settings.plugins.write_tsdb.alwaysappendds %}
   AlwaysAppendDS {{ collectd_settings.plugins.write_tsdb.alwaysappendds|lower }}
{%- endif %}
 </Carbon>
</Plugin>
